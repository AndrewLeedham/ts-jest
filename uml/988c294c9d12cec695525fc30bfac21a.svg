<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="925px" preserveAspectRatio="none" style="width:804px;height:925px;" version="1.1" viewBox="0 0 804 925" width="804px" zoomAndPan="magnify"><defs><filter height="300%" id="f155ogfbw4eakd" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="258" cy="20" fill="#000000" filter="url(#f155ogfbw4eakd)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><path d="M329,54.4111 L329,63.0664 L309,67.0664 L329,71.0664 L329,79.7217 A0,0 0 0 0 329,79.7217 L625,79.7217 A0,0 0 0 0 625,79.7217 L625,64.4111 L615,54.4111 L329,54.4111 A0,0 0 0 0 329,54.4111 " fill="#FBFB77" filter="url(#f155ogfbw4eakd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M615,54.4111 L615,64.4111 L625,64.4111 L615,54.4111 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="275" x="335" y="71.9795">will build ts-jest before creating the bundle</text><rect fill="#FEFECE" filter="url(#f155ogfbw4eakd)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="207" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="82" x="217" y="71.6016">bundle ts-jest</text><path d="M349,100.8887 L349,117.1992 L329,121.1992 L349,125.1992 L349,141.5098 A0,0 0 0 0 349,141.5098 L613,141.5098 A0,0 0 0 0 613,141.5098 L613,110.8887 L603,100.8887 L349,100.8887 A0,0 0 0 0 349,100.8887 " fill="#FBFB77" filter="url(#f155ogfbw4eakd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M603,100.8887 L603,110.8887 L613,110.8887 L603,100.8887 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="355" y="118.457">`e2e/__workdir_symlink__` links to it</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="355" y="133.7676">except on CI environments</text><rect fill="#FEFECE" filter="url(#f155ogfbw4eakd)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="187" y="104.1328"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="122" x="197" y="125.7344">create temp work dir</text><path d="M524,494.2744 L524,519.585 L792,519.585 L792,504.2744 L782,494.2744 L524,494.2744 " fill="#FBFB77" filter="url(#f155ogfbw4eakd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M782,494.2744 L782,504.2744 L792,504.2744 L782,494.2744 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="530" y="511.8428">tempaltes are in `e2e/__templates__/`</text><polygon fill="#FEFECE" filter="url(#f155ogfbw4eakd)" points="189.5,205.5098,326.5,205.5098,338.5,217.5098,326.5,229.5098,189.5,229.5098,177.5,217.5098,189.5,205.5098" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="137" x="189.5" y="221.667">template's build directory</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="31" x="146.5" y="215.1895">esists</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="53" x="338.5" y="215.1895">not exists</text><rect fill="#FEFECE" filter="url(#f155ogfbw4eakd)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="192" x="71.5" y="239.5098"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="172" x="81.5" y="261.1113">wipe but `node_modules` dir</text><rect fill="#FEFECE" filter="url(#f155ogfbw4eakd)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="320.5" y="239.5098"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="36" x="330.5" y="261.1113">create</text><polygon fill="#FEFECE" filter="url(#f155ogfbw4eakd)" points="258,279.6426,270,291.6426,258,303.6426,246,291.6426,258,279.6426" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f155ogfbw4eakd)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="274" x="121" y="323.6426"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="254" x="131" y="345.2441">copy files from template's dir to its build dir</text><rect fill="#FEFECE" filter="url(#f155ogfbw4eakd)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="205" y="426.2529"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="86" x="215" y="447.8545">read metadata</text><polygon fill="#FEFECE" filter="url(#f155ogfbw4eakd)" points="94.5,480.3857,182.5,480.3857,194.5,492.3857,182.5,504.3857,94.5,504.3857,82.5,492.3857,94.5,480.3857" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="142.5" y="515.0205">has changed</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="94.5" y="496.543">package lock file</text><rect fill="#FEFECE" filter="url(#f155ogfbw4eakd)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="185" x="46" y="537.3408"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="165" x="56" y="558.9424">remove `node_modules` dir</text><rect fill="#FEFECE" filter="url(#f155ogfbw4eakd)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="78.5" y="591.4736"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="88.5" y="613.0752">npm install (or ci)</text><rect fill="#FEFECE" filter="url(#f155ogfbw4eakd)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="169" x="54" y="645.6064"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="149" x="64" y="667.208">npm install ts-jest bundle</text><polygon fill="#FEFECE" filter="url(#f155ogfbw4eakd)" points="298,480.3857,373,480.3857,385,492.3857,373,504.3857,298,504.3857,286,492.3857,298,480.3857" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="339.5" y="515.0205">has changed</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="75" x="298" y="496.543">ts-jest bundle</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="385" y="490.0654">hasn't changed</text><rect fill="#FEFECE" filter="url(#f155ogfbw4eakd)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="169" x="251" y="537.3408"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="149" x="261" y="558.9424">npm install ts-jest bundle</text><rect fill="#FEFECE" filter="url(#f155ogfbw4eakd)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="160" x="178" y="719.7393"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="140" x="188" y="741.3408">write updated metadata</text><polygon fill="#FEFECE" filter="url(#f155ogfbw4eakd)" points="214,377.7754,302,377.7754,314,389.7754,302,401.7754,214,401.7754,202,389.7754,214,377.7754" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="32" x="262" y="412.4102">exists</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="214" y="393.9326">package lock file</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="53" x="314" y="387.4551">not exists</text><polygon fill="#FEFECE" filter="url(#f155ogfbw4eakd)" points="258,773.8721,270,785.8721,258,797.8721,246,785.8721,258,773.8721" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f155ogfbw4eakd)" points="211.5,161.5098,304.5,161.5098,316.5,173.5098,304.5,185.5098,211.5,185.5098,199.5,173.5098,211.5,161.5098" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="93" x="211.5" y="177.667">for each template</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="27" x="172.5" y="171.1895">done</text><rect fill="#FEFECE" filter="url(#f155ogfbw4eakd)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="192.5" y="839.8721"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="111" x="202.5" y="861.4736">all templates ready</text><ellipse cx="258" cy="904.0049" fill="none" filter="url(#f155ogfbw4eakd)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="258.5" cy="904.5049" fill="#000000" filter="url(#f155ogfbw4eakd)" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258" x2="258" y1="30" y2="50"/><polygon fill="#A80036" points="254,40,258,50,262,40,258,44" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258" x2="258" y1="84.1328" y2="104.1328"/><polygon fill="#A80036" points="254,94.1328,258,104.1328,262,94.1328,258,98.1328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="177.5" x2="167.5" y1="217.5098" y2="217.5098"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="167.5" x2="167.5" y1="217.5098" y2="239.5098"/><polygon fill="#A80036" points="163.5,229.5098,167.5,239.5098,171.5,229.5098,167.5,233.5098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="338.5" x2="348.5" y1="217.5098" y2="217.5098"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="348.5" x2="348.5" y1="217.5098" y2="239.5098"/><polygon fill="#A80036" points="344.5,229.5098,348.5,239.5098,352.5,229.5098,348.5,233.5098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="167.5" x2="167.5" y1="273.6426" y2="291.6426"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="167.5" x2="246" y1="291.6426" y2="291.6426"/><polygon fill="#A80036" points="236,287.6426,246,291.6426,236,295.6426,240,291.6426" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="348.5" x2="348.5" y1="273.6426" y2="291.6426"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="348.5" x2="270" y1="291.6426" y2="291.6426"/><polygon fill="#A80036" points="280,287.6426,270,291.6426,280,295.6426,276,291.6426" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258" x2="258" y1="303.6426" y2="323.6426"/><polygon fill="#A80036" points="254,313.6426,258,323.6426,262,313.6426,258,317.6426" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="138.5" x2="138.5" y1="571.4736" y2="591.4736"/><polygon fill="#A80036" points="134.5,581.4736,138.5,591.4736,142.5,581.4736,138.5,585.4736" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="138.5" x2="138.5" y1="625.6064" y2="645.6064"/><polygon fill="#A80036" points="134.5,635.6064,138.5,645.6064,142.5,635.6064,138.5,639.6064" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="138.5" x2="138.5" y1="504.3857" y2="537.3408"/><polygon fill="#A80036" points="134.5,527.3408,138.5,537.3408,142.5,527.3408,138.5,531.3408" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="138.5" x2="138.5" y1="679.7393" y2="699.7393"/><polygon fill="#A80036" points="134.5,689.7393,138.5,699.7393,142.5,689.7393,138.5,693.7393" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="335.5" x2="335.5" y1="504.3857" y2="537.3408"/><polygon fill="#A80036" points="331.5,527.3408,335.5,537.3408,339.5,527.3408,335.5,531.3408" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="335.5" x2="335.5" y1="571.4736" y2="699.7393"/><polygon fill="#A80036" points="331.5,689.7393,335.5,699.7393,339.5,689.7393,335.5,693.7393" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="194.5" x2="286" y1="492.3857" y2="492.3857"/><polygon fill="#A80036" points="276,488.3857,286,492.3857,276,496.3857,280,492.3857" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258" x2="258" y1="460.3857" y2="465.3857"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258" x2="138.5" y1="465.3857" y2="465.3857"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="138.5" x2="138.5" y1="465.3857" y2="480.3857"/><polygon fill="#A80036" points="134.5,470.3857,138.5,480.3857,142.5,470.3857,138.5,474.3857" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="385" x2="455" y1="492.3857" y2="492.3857"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="455" x2="455" y1="492.3857" y2="699.7393"/><polygon fill="#A80036" points="451,689.7393,455,699.7393,459,689.7393,455,693.7393" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="138.5" x2="455" y1="699.7393" y2="699.7393"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258" x2="258" y1="699.7393" y2="719.7393"/><polygon fill="#A80036" points="254,709.7393,258,719.7393,262,709.7393,258,713.7393" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258" x2="258" y1="401.7754" y2="426.2529"/><polygon fill="#A80036" points="254,416.2529,258,426.2529,262,416.2529,258,420.2529" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="314" x2="480" y1="389.7754" y2="389.7754"/><polygon fill="#A80036" points="476,595.0625,480,605.0625,484,595.0625,480,599.0625" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="480" x2="480" y1="389.7754" y2="785.8721"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="480" x2="270" y1="785.8721" y2="785.8721"/><polygon fill="#A80036" points="280,781.8721,270,785.8721,280,789.8721,276,785.8721" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258" x2="258" y1="753.8721" y2="773.8721"/><polygon fill="#A80036" points="254,763.8721,258,773.8721,262,763.8721,258,767.8721" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258" x2="258" y1="357.7754" y2="377.7754"/><polygon fill="#A80036" points="254,367.7754,258,377.7754,262,367.7754,258,371.7754" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258" x2="258" y1="185.5098" y2="205.5098"/><polygon fill="#A80036" points="254,195.5098,258,205.5098,262,195.5098,258,199.5098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258" x2="258" y1="797.8721" y2="807.8721"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258" x2="504" y1="807.8721" y2="807.8721"/><polygon fill="#A80036" points="500,516.9297,504,506.9297,508,516.9297,504,512.9297" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="504" x2="504" y1="173.5098" y2="807.8721"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="504" x2="316.5" y1="173.5098" y2="173.5098"/><polygon fill="#A80036" points="326.5,169.5098,316.5,173.5098,326.5,177.5098,322.5,173.5098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="199.5" x2="24" y1="173.5098" y2="173.5098"/><polygon fill="#A80036" points="20,502.9297,24,512.9297,28,502.9297,24,506.9297" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="24" x2="24" y1="173.5098" y2="819.8721"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="24" x2="258" y1="819.8721" y2="819.8721"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258" x2="258" y1="819.8721" y2="839.8721"/><polygon fill="#A80036" points="254,829.8721,258,839.8721,262,829.8721,258,833.8721" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258" x2="258" y1="138.2656" y2="161.5098"/><polygon fill="#A80036" points="254,151.5098,258,161.5098,262,151.5098,258,155.5098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258" x2="258" y1="874.0049" y2="894.0049"/><polygon fill="#A80036" points="254,884.0049,258,894.0049,262,884.0049,258,888.0049" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml


start

:bundle ts-jest;
note right
  will build ts-jest before creating the bundle
end note

:create temp work dir;
note right
  `e2e/~__workdir_symlink__` links to it
  except on CI environments
end note

while (for each template)
  note right
    tempaltes are in `e2e/~__templates__/`
  end note

  if (template's build directory) then (esists)
    :wipe but `node_modules` dir;
  else (not exists)
    :create;
  endif

  :copy files from template's dir to its build dir;

  if (package lock file) then (exists)
    :read metadata;

    if (package lock file) then (has changed)
      :remove `node_modules` dir;

      :npm install (or ci);

      :npm install ts-jest bundle;

    else if (ts-jest bundle) then (has changed)
      :npm install ts-jest bundle;

    else (hasn't changed)
    endif
    :write updated metadata;

  else (not exists)
  endif

endwhile (done)

:all templates ready;

stop


@enduml

PlantUML version 1.2018.10(Sat Aug 25 19:02:59 CEST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_172-b11
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: en
Country: TH
--></g></svg>